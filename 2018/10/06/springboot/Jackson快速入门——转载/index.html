<!DOCTYPE html>




<html class="theme-next gemini" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="java," />





  <link rel="alternate" href="/atom.xml" title="技术成长之路" type="application/atom+xml" />






<meta name="description" content="Java生态圈中有很多处理JSON和XML格式化的类库，Jackson是其中比较著名的一个。虽然JDK自带了XML处理类库，但是相对来说比较低级，使用本文介绍的Jackson等高级类库处理起来会方便很多。 引入类库由于Jackson相关类库按照功能分为几个相对独立的，所以需要同时引入多个类库，为了方便我将版本号单独提取出来设置，相关Gradle配置如下。1234567891011121314151">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="Jackson快速入门——转载">
<meta property="og:url" content="http://yoursite.com/2018/10/06/springboot/Jackson快速入门——转载/index.html">
<meta property="og:site_name" content="技术成长之路">
<meta property="og:description" content="Java生态圈中有很多处理JSON和XML格式化的类库，Jackson是其中比较著名的一个。虽然JDK自带了XML处理类库，但是相对来说比较低级，使用本文介绍的Jackson等高级类库处理起来会方便很多。 引入类库由于Jackson相关类库按照功能分为几个相对独立的，所以需要同时引入多个类库，为了方便我将版本号单独提取出来设置，相关Gradle配置如下。1234567891011121314151">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-10-05T16:31:09.296Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jackson快速入门——转载">
<meta name="twitter:description" content="Java生态圈中有很多处理JSON和XML格式化的类库，Jackson是其中比较著名的一个。虽然JDK自带了XML处理类库，但是相对来说比较低级，使用本文介绍的Jackson等高级类库处理起来会方便很多。 引入类库由于Jackson相关类库按照功能分为几个相对独立的，所以需要同时引入多个类库，为了方便我将版本号单独提取出来设置，相关Gradle配置如下。1234567891011121314151">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/10/06/springboot/Jackson快速入门——转载/"/>





  <title>Jackson快速入门——转载 | 技术成长之路</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">技术成长之路</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Simple technology</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/06/springboot/Jackson快速入门——转载/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杨旭">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oima95jt3.bkt.clouddn.com/aversion.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术成长之路">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Jackson快速入门——转载</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-06T00:00:00+08:00">
                2018-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Java生态圈中有很多处理JSON和XML格式化的类库，Jackson是其中比较著名的一个。虽然JDK自带了XML处理类库，但是相对来说比较低级，使用本文介绍的Jackson等高级类库处理起来会方便很多。</p>
<h3 id="引入类库"><a href="#引入类库" class="headerlink" title="引入类库"></a>引入类库</h3><p>由于Jackson相关类库按照功能分为几个相对独立的，所以需要同时引入多个类库，为了方便我将版本号单独提取出来设置，相关Gradle配置如下。<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    jacksonVersion = <span class="string">'2.9.5'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.core'</span>, <span class="string">name:</span> <span class="string">'jackson-core'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.core'</span>, <span class="string">name:</span> <span class="string">'jackson-databind'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.core'</span>, <span class="string">name:</span> <span class="string">'jackson-annotations'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    <span class="comment">// 引入XML功能</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.dataformat'</span>, <span class="string">name:</span> <span class="string">'jackson-dataformat-xml'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    <span class="comment">// 比JDK自带XML实现更高效的类库</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.woodstox'</span>, <span class="string">name:</span> <span class="string">'woodstox-core'</span>, <span class="string">version:</span> <span class="string">'5.1.0'</span></span><br><span class="line">    <span class="comment">// Java 8 新功能</span></span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.datatype'</span>, <span class="string">name:</span> <span class="string">'jackson-datatype-jsr310'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.module'</span>, <span class="string">name:</span> <span class="string">'jackson-module-parameter-names'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line">    compile <span class="string">group:</span> <span class="string">'com.fasterxml.jackson.datatype'</span>, <span class="string">name:</span> <span class="string">'jackson-datatype-jdk8'</span>, <span class="string">version:</span> jacksonVersion</span><br><span class="line"></span><br><span class="line">    compileOnly <span class="string">group:</span> <span class="string">'org.projectlombok'</span>, <span class="string">name:</span> <span class="string">'lombok'</span>, <span class="string">version:</span> <span class="string">'1.16.22'</span></span><br><span class="line">&#125;<span class="number">12345678910111213141516171819</span></span><br></pre></td></tr></table></figure></p>
<p>Maven配置请去mvnrepository搜索。</p>
<h3 id="Jackson注解"><a href="#Jackson注解" class="headerlink" title="Jackson注解"></a>Jackson注解</h3><p>Jackson类库包含了很多注解，可以让我们快速建立Java类与JSON之间的关系。详细文档可以参考<a href="https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations" target="_blank" rel="noopener">Jackson-Annotations</a>。下面介绍一下常用的。</p>
<h4 id="属性命名"><a href="#属性命名" class="headerlink" title="属性命名"></a>属性命名</h4><p><code>@JsonProperty</code>注解指定一个属性用于JSON映射，默认情况下映射的JSON属性与注解的属性名称相同，不过可以使用该注解的value值修改JSON属性名，该注解还有一个index属性指定生成JSON属性的顺序，如果有必要的话。</p>
<h4 id="属性包含"><a href="#属性包含" class="headerlink" title="属性包含"></a>属性包含</h4><p>还有一些注解可以管理在映射JSON的时候包含或排除某些属性，下面介绍一下常用的几个。</p>
<p><code>@JsonIgnore</code>注解用于排除某个属性，这样该属性就不会被Jackson序列化和反序列化。</p>
<p><code>@JsonIgnoreProperties</code>注解是类注解。在序列化为JSON的时候，<code>@JsonIgnoreProperties({&quot;prop1&quot;, &quot;prop2&quot;})</code>会忽略pro1和pro2两个属性。在从JSON反序列化为Java类的时候，<code>@JsonIgnoreProperties(ignoreUnknown=true)</code>会忽略所有没有Getter和Setter的属性。该注解在Java类和JSON不完全匹配的时候很有用。</p>
<p><code>@JsonIgnoreType</code>也是类注解，会排除所有指定类型的属性。</p>
<h4 id="序列化相关"><a href="#序列化相关" class="headerlink" title="序列化相关"></a>序列化相关</h4><p><code>@JsonPropertyOrder</code>和<code>@JsonProperty</code>的index属性类似，指定属性序列化时的顺序。</p>
<p><code>@JsonRootName</code>注解用于指定JSON根属性的名称。</p>
<h3 id="处理JSON"><a href="#处理JSON" class="headerlink" title="处理JSON"></a>处理JSON</h3><p>简单映射<br>我们用Lombok设置一个简单的Java类。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line">public class Friend &#123;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">nickname</span>;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">int</span> <span class="selector-tag">age</span>;</span><br><span class="line">&#125;<span class="selector-tag">1234567</span></span><br></pre></td></tr></table></figure></p>
<p>然后就可以处理JSON数据了。首先需要一个ObjectMapper对象，序列化和反序列化都需要它。<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">Friend <span class="keyword">friend</span> = <span class="keyword">new</span> Friend(<span class="string">"yitian"</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写为字符串</span></span><br><span class="line"><span class="keyword">String</span> <span class="built_in">text</span> = mapper.writeValueAsString(<span class="keyword">friend</span>);</span><br><span class="line"><span class="comment">// 写为文件</span></span><br><span class="line">mapper.writeValue(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"friend.json"</span>), <span class="keyword">friend</span>);</span><br><span class="line"><span class="comment">// 写为字节流</span></span><br><span class="line"><span class="keyword">byte</span>[] bytes = mapper.writeValueAsBytes(<span class="keyword">friend</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">text</span>);</span><br><span class="line"><span class="comment">// 从字符串中读取</span></span><br><span class="line">Friend newFriend = mapper.readValue(<span class="built_in">text</span>, Friend.class);</span><br><span class="line"><span class="comment">// 从字节流中读取</span></span><br><span class="line">newFriend = mapper.readValue(bytes, Friend.class);</span><br><span class="line"><span class="comment">// 从文件中读取</span></span><br><span class="line">newFriend = mapper.readValue(<span class="keyword">new</span> <span class="built_in">File</span>(<span class="string">"friend.json"</span>), Friend.class);</span><br><span class="line">System.out.<span class="built_in">println</span>(newFriend);<span class="number">1234567891011121314151617</span></span><br></pre></td></tr></table></figure></p>
<p>程序结果如下。可以看到生成的JSON属性和Java类中定义的一致。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"nickname"</span>:<span class="string">"yitian"</span>,<span class="string">"age"</span>:25&#125;</span><br><span class="line">Friend(<span class="attribute">nickname</span>=yitian, <span class="attribute">age</span>=25)12</span><br></pre></td></tr></table></figure></p>
<h3 id="集合的映射"><a href="#集合的映射" class="headerlink" title="集合的映射"></a>集合的映射</h3><p>除了使用Java类进行映射之外，我们还可以直接使用Map和List等Java集合组织JSON数据，在需要的时候可以使用readTree方法直接读取JSON中的某个属性值。需要注意的是从JSON转换为Map对象的时候，由于Java的类型擦除，所以类型需要我们手动用new TypeReference<t>给出。</t></p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="built_in">map</span>.put(<span class="string">"age"</span>, <span class="number">25</span>);</span><br><span class="line"><span class="built_in">map</span>.put(<span class="string">"name"</span>, <span class="string">"yitian"</span>);</span><br><span class="line"><span class="built_in">map</span>.put(<span class="string">"interests"</span>, <span class="keyword">new</span> <span class="keyword">String</span>[]&#123;<span class="string">"pc games"</span>, <span class="string">"music"</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">String</span> <span class="built_in">text</span> = mapper.writeValueAsString(<span class="built_in">map</span>);</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">text</span>);</span><br><span class="line"></span><br><span class="line">Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt; map2 = mapper.readValue(<span class="built_in">text</span>, <span class="keyword">new</span> TypeReference&lt;Map&lt;<span class="keyword">String</span>, <span class="keyword">Object</span>&gt;&gt;() &#123;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.<span class="built_in">println</span>(map2);</span><br><span class="line"></span><br><span class="line">JsonNode root = mapper.readTree(<span class="built_in">text</span>);</span><br><span class="line"><span class="keyword">String</span> name = root.<span class="built_in">get</span>(<span class="string">"name"</span>).asText();</span><br><span class="line"><span class="built_in">int</span> age = root.<span class="built_in">get</span>(<span class="string">"age"</span>).asInt();</span><br><span class="line"></span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="string">"name:"</span> + name + <span class="string">" age:"</span> + age);<span class="number">12345678910111213141516171819</span></span><br></pre></td></tr></table></figure>
<p>程序结果如下。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"name"</span>:<span class="string">"yitian"</span>,<span class="string">"interests"</span>:[<span class="string">"pc games"</span>,<span class="string">"music"</span>],<span class="string">"age"</span>:25&#125;</span><br><span class="line">&#123;<span class="attribute">name</span>=yitian, interests=[pc games, music], <span class="attribute">age</span>=25&#125;</span><br><span class="line">name:yitian age:25123</span><br></pre></td></tr></table></figure></p>
<h3 id="Jackson配置"><a href="#Jackson配置" class="headerlink" title="Jackson配置"></a>Jackson配置</h3><p>Jackson预定义了一些配置，我们通过启用和禁用某些属性可以修改Jackson运行的某些行为。详细文档参考<a href="https://github.com/FasterXML/jackson-databind/wiki/JacksonFeatures" target="_blank" rel="noopener">JacksonFeatures。</a>下面我简单翻译一下Jackson README上列出的一些属性。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 美化输出</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.enable</span>(SerializationFeature.INDENT_OUTPUT);</span><br><span class="line"><span class="comment">// 允许序列化空的POJO类</span></span><br><span class="line"><span class="comment">// （否则会抛出异常）</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.disable</span>(SerializationFeature.FAIL_ON_EMPTY_BEANS);</span><br><span class="line"><span class="comment">// 把java.util.Date, Calendar输出为数字（时间戳）</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.disable</span>(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在遇到未知属性的时候不抛出异常</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.disable</span>(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);</span><br><span class="line"><span class="comment">// 强制JSON 空字符串("")转换为null对象值:</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.enable</span>(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在JSON中允许C/C++ 样式的注释(非标准，默认禁用)</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.configure</span>(JsonParser.Feature.ALLOW_COMMENTS, true);</span><br><span class="line"><span class="comment">// 允许没有引号的字段名（非标准）</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.configure</span>(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);</span><br><span class="line"><span class="comment">// 允许单引号（非标准）</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.configure</span>(JsonParser.Feature.ALLOW_SINGLE_QUOTES, true);</span><br><span class="line"><span class="comment">// 强制转义非ASCII字符</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.configure</span>(JsonGenerator.Feature.ESCAPE_NON_ASCII, true);</span><br><span class="line"><span class="comment">// 将内容包裹为一个JSON属性，属性名由@JsonRootName注解指定</span></span><br><span class="line"><span class="selector-tag">mapper</span><span class="selector-class">.configure</span>(SerializationFeature.WRAP_ROOT_VALUE, true);<span class="selector-tag">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure></p>
<p>这里有三个方法，configure方法接受配置名和要设置的值，Jackson 2.5版本新加的enable和disable方法则直接启用和禁用相应属性，我推荐使用后面两个方法。</p>
<h3 id="用注解管理映射"><a href="#用注解管理映射" class="headerlink" title="用注解管理映射"></a>用注解管理映射</h3><p>前面介绍了一些Jackson注解，下面来应用一下这些注解。首先来看看使用了注解的Java类。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line"><span class="variable">@JsonRootName</span>(<span class="string">"FriendDetail"</span>)</span><br><span class="line"><span class="variable">@JsonIgnoreProperties</span>(&#123;<span class="string">"uselessProp1"</span>, <span class="string">"uselessProp3"</span>&#125;)</span><br><span class="line">public class FriendDetail &#123;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"NickName"</span>)</span><br><span class="line">    private String name;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Age"</span>)</span><br><span class="line">    private int age;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">uselessProp1</span>;</span><br><span class="line">    @<span class="selector-tag">JsonIgnore</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">int</span> <span class="selector-tag">uselessProp2</span>;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">uselessProp3</span>;</span><br><span class="line">&#125;<span class="selector-tag">123456789101112131415</span></span><br></pre></td></tr></table></figure></p>
<p>然后看看代码。需要注意的是，由于设置了排除的属性，所以生成的JSON和Java类并不是完全对应关系，所以禁用<code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code>是必要的。</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"><span class="comment">//mapper.enable(SerializationFeature.WRAP_ROOT_VALUE);</span></span><br><span class="line">mapper.disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);</span><br><span class="line">FriendDetail fd = <span class="keyword">new</span> FriendDetail(<span class="string">"yitian"</span>, <span class="number">25</span>, <span class="string">""</span>, <span class="number">0</span>, <span class="string">""</span>);</span><br><span class="line"><span class="keyword">String</span> <span class="built_in">text</span> = mapper.writeValueAsString(fd);</span><br><span class="line">System.out.<span class="built_in">println</span>(<span class="built_in">text</span>);</span><br><span class="line"></span><br><span class="line">FriendDetail fd2 = mapper.readValue(<span class="built_in">text</span>, FriendDetail.class);</span><br><span class="line">System.out.<span class="built_in">println</span>(fd2);<span class="number">123456789</span></span><br></pre></td></tr></table></figure>
<p>运行结果如下。可以看到生成JSON的时候忽略了我们制定的值，而且在转换为Java类的时候对应的属性为空。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"NickName"</span>:<span class="string">"yitian"</span>,<span class="string">"Age"</span>:25&#125;</span><br><span class="line">FriendDetail(<span class="attribute">name</span>=yitian, <span class="attribute">age</span>=25, <span class="attribute">uselessProp1</span>=<span class="literal">null</span>, <span class="attribute">uselessProp2</span>=0, <span class="attribute">uselessProp3</span>=<span class="literal">null</span>)12</span><br></pre></td></tr></table></figure>
<p>然后取消注释代码中的那行，也就是启用<code>WRAP_ROOT_VALUE</code>功能，再运行一下程序，运行结果如下。可以看到生成的JSON结果发生了变化，而且由于JSON结果变化，所以Java类转换失败（所有字段值全为空）。<code>WRAP_ROOT_VALUE</code>这个功能在有些时候比较有用，因为有些JSON文件需要这种结构。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"FriendDetail"</span>:&#123;<span class="string">"NickName"</span>:<span class="string">"yitian"</span>,<span class="string">"Age"</span>:25&#125;&#125;</span><br><span class="line">FriendDetail(<span class="attribute">name</span>=<span class="literal">null</span>, <span class="attribute">age</span>=0, <span class="attribute">uselessProp1</span>=<span class="literal">null</span>, <span class="attribute">uselessProp2</span>=0, <span class="attribute">uselessProp3</span>=<span class="literal">null</span>)12</span><br></pre></td></tr></table></figure></p>
<h3 id="Java8日期时间类支持"><a href="#Java8日期时间类支持" class="headerlink" title="Java8日期时间类支持"></a>Java8日期时间类支持</h3><p>Java8增加了一套全新的日期时间类，Jackson对此也有支持。这些支持是以Jackson模块形式提供的，所以首先就是注册这些模块。<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ObjectMapper mapper = <span class="keyword">new</span> <span class="type">ObjectMapper</span>()</span><br><span class="line">        .registerModule(<span class="keyword">new</span> <span class="type">JavaTimeModule</span>())</span><br><span class="line">        .registerModule(<span class="keyword">new</span> <span class="type">ParameterNamesModule</span>())</span><br><span class="line">        .registerModule(<span class="keyword">new</span> <span class="type">Jdk8Module</span>());<span class="number">1234</span></span><br></pre></td></tr></table></figure></p>
<p>导入类库之后，Jackson也可以自动搜索所有模块，不需要我们手动注册。<br> <code>mapper.findAndRegisterModules();1</code></p>
<p>我们新建一个带有LocalDate字段的Java类。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line"><span class="variable">@JsonRootName</span>(<span class="string">"Person"</span>)</span><br><span class="line">public class Person &#123;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Name"</span>)</span><br><span class="line">    private String name;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"NickName"</span>)</span><br><span class="line">    private String nickname;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Age"</span>)</span><br><span class="line">    private int age;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"IdentityCode"</span>)</span><br><span class="line">    private String identityCode;</span><br><span class="line">    <span class="variable">@JsonProperty</span></span><br><span class="line">    <span class="variable">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-DD"</span>)</span><br><span class="line">    private LocalDate birthday;</span><br><span class="line"></span><br><span class="line">&#125;<span class="number">123456789101112131415161718</span></span><br></pre></td></tr></table></figure></p>
<p>然后来看看代码。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> java8DateTime() <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    Person p1 = <span class="keyword">new</span> Person(<span class="string">"yitian"</span>, <span class="string">"易天"</span>, <span class="number">25</span>, <span class="string">"10000"</span>, LocalDate.of(<span class="number">1994</span>, <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">    ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper()</span><br><span class="line">            .registerModule(<span class="keyword">new</span> JavaTimeModule());</span><br><span class="line">    <span class="comment">//mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span></span><br><span class="line">    <span class="keyword">String</span> <span class="built_in">text</span> = mapper.writeValueAsString(p1);</span><br><span class="line">    System.out.<span class="built_in">println</span>(<span class="built_in">text</span>);</span><br><span class="line"></span><br><span class="line">    Person p2 = mapper.readValue(<span class="built_in">text</span>, Person.class);</span><br><span class="line">    System.out.<span class="built_in">println</span>(p2);</span><br><span class="line">&#125;<span class="number">1234567891011</span></span><br></pre></td></tr></table></figure></p>
<p>运行结果如下。可以看到，生成的JSON日期变成了[1994,1,1]这样的时间戳形式，一般情况下不符合我们的要求。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"birthday"</span>:[1994,1,1],<span class="string">"Name"</span>:<span class="string">"yitian"</span>,<span class="string">"NickName"</span>:<span class="string">"易天"</span>,<span class="string">"Age"</span>:25,<span class="string">"IdentityCode"</span>:<span class="string">"10000"</span>&#125;</span><br><span class="line">Person(<span class="attribute">name</span>=yitian, <span class="attribute">nickname</span>=易天, <span class="attribute">age</span>=25, <span class="attribute">identityCode</span>=10000, <span class="attribute">birthday</span>=1994-01-01)12</span><br></pre></td></tr></table></figure></p>
<p>取消注释那行代码，程序运行结果如下。这样一来就变成了我们一般使用的形式了。如果有格式需要的话，可以使用<code>@JsonFormat(pattern = &quot;yyyy-MM-DD&quot;)</code>注解格式化日期显示。<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"birthday"</span>:<span class="string">"1994-01-01"</span>,<span class="string">"Name"</span>:<span class="string">"yitian"</span>,<span class="string">"NickName"</span>:<span class="string">"易天"</span>,<span class="string">"Age"</span>:25,<span class="string">"IdentityCode"</span>:<span class="string">"10000"</span>&#125;</span><br><span class="line">Person(<span class="attribute">name</span>=yitian, <span class="attribute">nickname</span>=易天, <span class="attribute">age</span>=25, <span class="attribute">identityCode</span>=10000, <span class="attribute">birthday</span>=1994-01-01)12</span><br></pre></td></tr></table></figure></p>
<p>处理XML</p>
<p>Jackson是一个处理JSON的类库，不过它也通过<code>jackson-dataformat-xml</code>包提供了处理XML的功能。Jackson建议我们在处理XML的时候使用<code>woodstox-core</code>包，它是一个XML的实现，比JDK自带XML实现更加高效，也更加安全。</p>
<p>这里有个注意事项，如果你正在使用Java 9以上的JDK，可能会出现<code>java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException</code>异常，这是因为Java 9实现了JDK的模块化，将原本和JDK打包在一起的JAXB实现分隔出来。所以这时候需要我们手动添加JAXB的实现。在Gradle中添加下面的代码即可。</p>
<p><code>compile group: &#39;javax.xml.bind&#39;, name: &#39;jaxb-api&#39;, version: &#39;2.3.0&#39;1</code></p>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><p>Jackson XML除了使用Jackson JSON和JDK JAXB的一些注解之外，自己也定义了一些注解。下面简单介绍一下几个常用注解。</p>
<p><code>@JacksonXmlProperty</code>注解有三个属性，<code>namespace</code>和<code>localname</code>属性用于指定XML命名空间的名称，<code>isAttribute</code>指定该属性作为XML的属性（）还是作为子标签（）.</p>
<p><code>@JacksonXmlRootElement</code>注解有两个属性，<code>namespace</code>和<code>localname</code>属性用于指定XML根元素命名空间的名称。</p>
<p><code>@JacksonXmlText</code>注解将属性直接作为未被标签包裹的普通文本表现。</p>
<p><code>@JacksonXmlCData</code>将属性包裹在CDATA标签中。</p>
<h3 id="XML映射"><a href="#XML映射" class="headerlink" title="XML映射"></a>XML映射</h3><p>新建如下一个Java类。<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line"><span class="variable">@JsonRootName</span>(<span class="string">"Person"</span>)</span><br><span class="line">public class Person &#123;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Name"</span>)</span><br><span class="line">    private String name;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"NickName"</span>)</span><br><span class="line">    <span class="comment">//@JacksonXmlText</span></span><br><span class="line">    private String nickname;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Age"</span>)</span><br><span class="line">    private int age;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"IdentityCode"</span>)</span><br><span class="line">    <span class="variable">@JacksonXmlCData</span></span><br><span class="line">    private String identityCode;</span><br><span class="line">    <span class="variable">@JsonProperty</span>(<span class="string">"Birthday"</span>)</span><br><span class="line">    <span class="comment">//@JacksonXmlProperty(isAttribute = true)</span></span><br><span class="line">    <span class="variable">@JsonFormat</span>(pattern = <span class="string">"yyyy/MM/DD"</span>)</span><br><span class="line">    private LocalDate birthday;</span><br><span class="line"></span><br><span class="line">&#125;<span class="number">123456789101112131415161718192021</span></span><br></pre></td></tr></table></figure></p>
<p>下面是代码示例，基本上和JSON的API非常相似，XmlMapper实际上就是ObjectMapper的子类。<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Person p1 = new Person(<span class="string">"yitian"</span>, <span class="string">"易天"</span>, <span class="number">25</span>, <span class="string">"10000"</span>, LocalDate.of(<span class="number">1994</span>, <span class="number">1</span>, <span class="number">1</span>))<span class="comment">;</span></span><br><span class="line">XmlMapper mapper = new XmlMapper()<span class="comment">;</span></span><br><span class="line">mapper.findAndRegisterModules()<span class="comment">;</span></span><br><span class="line">mapper.<span class="keyword">disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span></span><br><span class="line"><span class="keyword">mapper.enable(SerializationFeature.INDENT_OUTPUT);</span></span><br><span class="line"><span class="keyword">String </span>text = mapper.writeValueAsString(p1)<span class="comment">;</span></span><br><span class="line">System.out.println(text)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">Person p2 = mapper.readValue(text, Person.class)<span class="comment">;</span></span><br><span class="line">System.out.println(p2)<span class="comment">;12345678910</span></span><br></pre></td></tr></table></figure></p>
<p>运行结果如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Person</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Name</span>&gt;</span>yitian<span class="tag">&lt;/<span class="name">Name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">NickName</span>&gt;</span>易天<span class="tag">&lt;/<span class="name">NickName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Age</span>&gt;</span>25<span class="tag">&lt;/<span class="name">Age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">IdentityCode</span>&gt;</span>&lt;![CDATA[10000]]&gt;<span class="tag">&lt;/<span class="name">IdentityCode</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Birthday</span>&gt;</span>1994/01/01<span class="tag">&lt;/<span class="name">Birthday</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Person</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Person(name=yitian, nickname=易天, age=25, identityCode=10000, birthday=1994-01-01)123456789</span><br></pre></td></tr></table></figure>
<p>如果取消那两行注释，那么运行结果如下。可以看到Jackson XML注解对生成的XML的控制效果。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Person</span> <span class="attr">birthday</span>=<span class="string">"1994/01/01"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Name</span>&gt;</span>yitian<span class="tag">&lt;/<span class="name">Name</span>&gt;</span>易天</span><br><span class="line">  <span class="tag">&lt;<span class="name">Age</span>&gt;</span>25<span class="tag">&lt;/<span class="name">Age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">IdentityCode</span>&gt;</span>&lt;![CDATA[10000]]&gt;<span class="tag">&lt;/<span class="name">IdentityCode</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Person</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Person(name=yitian, nickname=null, age=25, identityCode=10000, birthday=1994-01-01)1234567</span><br></pre></td></tr></table></figure></p>
<h3 id="Spring-Boot集成"><a href="#Spring-Boot集成" class="headerlink" title="Spring Boot集成"></a>Spring Boot集成</h3><p>自动配置</p>
<p>Spring Boot对Jackson的支持非常完善，只要我们引入相应类库，Spring Boot就可以自动配置开箱即用的Bean。Spring自动配置的ObjectMapper（或者XmlMapper）作了如下配置，基本上可以适应大部分情况。</p>
<p>禁用了<code>MapperFeature.DEFAULT_VIEW_INCLUSION</code><br>禁用了<code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code><br>禁用了<code>SerializationFeature.WRITE_DATES_AS_TIMESTAMPS</code></p>
<p>如果需要修改自动配置的ObjectMapper属性也非常简单，Spring Boot提供了一组环境变量，直接在application.properties文件中修改即可。</p>
<table>
<thead>
<tr>
<th>Jackson枚举</th>
<th>Spring环境变量</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>com.fasterxml.jackson.databind.DeserializationFeature|spring.jackson.deserialization.=true|false<br>com.fasterxml.jackson.core.JsonGenerator.Feature|spring.jackson.generator.=true|false<br>com.fasterxml.jackson.databind.MapperFeature|spring.jackson.mapper.=true|false<br>com.fasterxml.jackson.core.JsonParser.Feature|spring.jackson.parser.=true|false<br>com.fasterxml.jackson.databind.SerializationFeature|spring.jackson.serialization.=true|false<br>com.fasterxml.jackson.annotation.JsonInclude.Include|spring.jackson.default-property-inclusion=always|non_null|non_absent|non_default|non_empty</p>
<p>由于Spring会同时配置相应的<code>HttpMessageConverters</code>，所以我们其实要做的很简单，用Jackson注解标注好要映射的Java类，然后直接让控制器返回对象即可！下面是一个Java类。<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JsonRootName(<span class="meta-string">"person"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@JsonProperty</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@JsonProperty</span></span><br><span class="line">    <span class="keyword">private</span> int id;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = <span class="meta-string">"yyyy-MM-DD"</span>)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Person(String name, int id, LocalDate birthday) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure></p>
<p>然后是控制器代码。在整个过程中我们只需要引入Jackson类库，然后编写业务代码就好了。关于如何配置Jackson类库，我们完全不需要管，这就是Spring Boot的方便之处。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Person person = new Person(<span class="string">"yitian"</span>, <span class="number">10000</span>, LocalDate.of(<span class="number">1994</span>, <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="meta-string">"/"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String index() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"index"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = <span class="meta-string">"/json"</span>, produces = <span class="meta-string">"application/json"</span>)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> Person json() &#123;</span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="number">12345678910111213141516</span></span><br></pre></td></tr></table></figure>
<p>进入localhost:8080/xml就可以看到对应结果了。 </p>
<h4 id="手动配置"><a href="#手动配置" class="headerlink" title="手动配置"></a>手动配置</h4><p>Spring Boot自动配置非常方便，但不是万能的。在必要的时候，我们需要手动配置Bean来替代自动配置的Bean。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JacksonConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="meta">@Qualifier(<span class="meta-string">"xml"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> XmlMapper xmlMapper(Jackson2ObjectMapperBuilder builder) &#123;</span><br><span class="line">        XmlMapper mapper = builder.createXmlMapper(<span class="literal">true</span>)</span><br><span class="line">                .build();</span><br><span class="line">        mapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br><span class="line">        mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line">        <span class="keyword">return</span> mapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Qualifier(<span class="meta-string">"json"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ObjectMapper jsonMapper(Jackson2ObjectMapperBuilder builder) &#123;</span><br><span class="line">        ObjectMapper mapper = builder.createXmlMapper(<span class="literal">false</span>)</span><br><span class="line">                .build();</span><br><span class="line">        mapper.enable(SerializationFeature.INDENT_OUTPUT);</span><br><span class="line">        mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line">        <span class="keyword">return</span> mapper;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="number">1234567891011121314151617181920212223</span></span><br></pre></td></tr></table></figure>
<p>然后在需要的地方进行依赖注入。需要注意为了区分ObjectMapper和XmlMapper，需要使用@Qualifier注解进行标记。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectMapper jsonMapper;</span><br><span class="line">    <span class="keyword">private</span> XmlMapper xmlMapper;</span><br><span class="line">    <span class="keyword">private</span> Person person = new Person(<span class="string">"yitian"</span>, <span class="number">10000</span>, LocalDate.of(<span class="number">1994</span>, <span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> MainController(<span class="meta">@Autowired</span> <span class="meta">@Qualifier(<span class="meta-string">"json"</span>)</span> ObjectMapper jsonMapper, <span class="meta">@Autowired</span> <span class="meta">@Qualifier(<span class="meta-string">"xml"</span>)</span> XmlMapper xmlMapper) &#123;</span><br><span class="line">        <span class="keyword">this</span>.jsonMapper = jsonMapper;</span><br><span class="line">        <span class="keyword">this</span>.xmlMapper = xmlMapper;</span><br><span class="line">    &#125;<span class="number">12345678910</span></span><br></pre></td></tr></table></figure>
<p>以上就是Jackson类库的一些介绍，希望对大家有所帮助。</p>
<hr>
<p>本文来自 过了即是客 的CSDN 博客 ，全文地址请点击：<a href="https://blog.csdn.net/u011054333/article/details/80504154?utm_source=copy" target="_blank" rel="noopener">https://blog.csdn.net/u011054333/article/details/80504154?utm_source=copy</a> </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/06/springboot/SpringBoot入门笔记03——文件上传/" rel="next" title="SpringBoot入门笔记03——文件上传">
                <i class="fa fa-chevron-left"></i> SpringBoot入门笔记03——文件上传
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://oima95jt3.bkt.clouddn.com/aversion.jpg"
                alt="杨旭" />
            
              <p class="site-author-name" itemprop="name">杨旭</p>
              <p class="site-description motion-element" itemprop="description">个人技术笔记以及技术积累</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#引入类库"><span class="nav-number">1.</span> <span class="nav-text">引入类库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jackson注解"><span class="nav-number">2.</span> <span class="nav-text">Jackson注解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#属性命名"><span class="nav-number">2.1.</span> <span class="nav-text">属性命名</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#属性包含"><span class="nav-number">2.2.</span> <span class="nav-text">属性包含</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列化相关"><span class="nav-number">2.3.</span> <span class="nav-text">序列化相关</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理JSON"><span class="nav-number">3.</span> <span class="nav-text">处理JSON</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集合的映射"><span class="nav-number">4.</span> <span class="nav-text">集合的映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Jackson配置"><span class="nav-number">5.</span> <span class="nav-text">Jackson配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用注解管理映射"><span class="nav-number">6.</span> <span class="nav-text">用注解管理映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java8日期时间类支持"><span class="nav-number">7.</span> <span class="nav-text">Java8日期时间类支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注解"><span class="nav-number">8.</span> <span class="nav-text">注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#XML映射"><span class="nav-number">9.</span> <span class="nav-text">XML映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot集成"><span class="nav-number">10.</span> <span class="nav-text">Spring Boot集成</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#手动配置"><span class="nav-number">10.1.</span> <span class="nav-text">手动配置</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杨旭</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
